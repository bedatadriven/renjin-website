

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>1. Introduction &mdash; Renjin 0.7.0-RC7 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="Renjin 0.7.0-RC7 documentation" href="index.html"/>
        <link rel="next" title="2. Moving data between Java and R code" href="moving-data-between-java-and-r-code.html"/>
        <link rel="prev" title="Renjin developer documentation" href="index.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> Renjin</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">1. Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#about-renjin">1.1. About Renjin</a></li>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">1.2. Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-up-a-java-project-for-renjin">1.3. Setting up a Java project for Renjin</a></li>
<li class="toctree-l2"><a class="reference internal" href="#evaluating-r-language-code">1.4. Evaluating R language code</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-cran-packages-in-renjin">1.5. Using CRAN packages in Renjin</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="moving-data-between-java-and-r-code.html">2. Moving data between Java and R code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="moving-data-between-java-and-r-code.html#a-java-developer-s-guide-to-r-objects">2.1. A Java developer&#8217;s guide to R objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="moving-data-between-java-and-r-code.html#overview-of-renjin-s-type-system">2.2. Overview of Renjin&#8217;s type system</a></li>
<li class="toctree-l2"><a class="reference internal" href="moving-data-between-java-and-r-code.html#pulling-data-from-r-into-java">2.3. Pulling data from R into Java</a></li>
<li class="toctree-l2"><a class="reference internal" href="moving-data-between-java-and-r-code.html#handling-errors-generated-by-the-r-code">2.4. Handling errors generated by the R code</a></li>
<li class="toctree-l2"><a class="reference internal" href="moving-data-between-java-and-r-code.html#pushing-data-from-java-to-r">2.5. Pushing data from Java to R</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="importing-java-classes-in-r-code.html">3. Importing Java classes into R code</a><ul>
<li class="toctree-l2"><a class="reference internal" href="importing-java-classes-in-r-code.html#bean-classes">3.1. Bean classes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="writing-renjin-extensions.html">4. Writing Renjin Extensions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="writing-renjin-extensions.html#package-directory-layout">4.1. Package directory layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-renjin-extensions.html#renjin-maven-plugin">4.2. Renjin Maven plugin</a></li>
<li class="toctree-l2"><a class="reference internal" href="writing-renjin-extensions.html#using-the-hamcrest-package-to-write-unit-tests">4.3. Using the <em>hamcrest</em> package to write unit tests</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="renjin-java-api-specification.html">5. Renjin Java API specification</a><ul>
<li class="toctree-l2"><a class="reference internal" href="renjin-java-api-specification.html#org-renjin-sexp">5.1. org.renjin.sexp</a></li>
<li class="toctree-l2"><a class="reference internal" href="renjin-java-api-specification.html#package-org.renjin.primitives.matrix">5.2. org.renjin.primitives.matrix</a></li>
<li class="toctree-l2"><a class="reference internal" href="renjin-java-api-specification.html#exceptions">5.3. Exceptions</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">Renjin</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>1. Introduction</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/introduction.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="introduction">
<h1>1. Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h1>
<p>This guide covers Renjin version 0.7.0-RC7 and is aimed at developers looking
to:</p>
<ol class="arabic simple">
<li>integrate R code in their Java applications and to exchange data between Java
and R code, and/or to</li>
<li>create extension packages that can be used by Renjin much like packages are
used to extend GNU R&#8217;s functionality.</li>
</ol>
<p>The guide also covers the parts of Renjin&#8217;s Java API that are most relevant to
these goals.</p>
<div class="section" id="about-renjin">
<h2>1.1. About Renjin<a class="headerlink" href="#about-renjin" title="Permalink to this headline">¶</a></h2>
<p>Renjin is an interpreter for the R programming language for statistical
computing written in Java much like <a class="reference external" href="http://www.jruby.org">JRuby</a> and <a class="reference external" href="http://www.jython.org">Jython</a> are for the Ruby and
Python programming languages. The official <a class="reference external" href="http://www.r-project.org">R project</a>, hereafter referred to
as <em>GNU R</em>, is the reference implementation for the R language and Renjin&#8217;s
current code base is derived from GNU R version 2.14.2.</p>
<p>The goal of Renjin is to eventually be compatible with GNU R such that most
existing R language programs will run in Renjin without the need to make any
changes to the code. Needless to say, Renjin is currently not 100% compatible
with GNU R so your mileage may vary.</p>
<p>Executing R code from Java or visa versa is not new: there is the <a class="reference external" href="http://www.rforge.net/rJava/">rJava</a> package
for GNU R that allows R code to call Java methods and there is the <a class="reference external" href="https://code.google.com/p/rcaller/">RCaller</a>
package to call R from Java which is similar to the <a class="reference external" href="http://www.rforge.net/JRI">JRI</a> package (now shipped as
part of <em>rJava</em>). <em>JRI</em> loads the R dynamic library into Java and provides a
Java API to the R functionality. <em>RCaller</em> works a little different by running R
as a separate process that the package communicates with. Finally, <em>rJava</em> uses
the Java Native Interface (JNI) to enable R to call Java applications running in
the JVM.</p>
<p>The biggest advantage of Renjin is that the R interpreter itself is a Java
module which can be seamlessly integrated into any Java application. This
dispenses with the need to load dynamic libraries or to provide some form of
communication between separate processes. These types of interfaces are often
the <a class="reference external" href="http://stackoverflow.com/tags/rjava/hot">source of much agony</a> because they place very specific demands on the
environment in which they run.</p>
<p>Renjin also benefits from the Java ecosystem which, amongst many things,
includes professional tools for component (or application) life-cycle
management. Think of <a class="reference external" href="http://maven.apache.org">Apache Maven</a> as a software project management tool for
building components (i.e. artifacts in Maven parlance) and managing dependencies
as well as the likes of <a class="reference external" href="http://www.jfrog.com">Artifactory</a> and <a class="reference external" href="http://www.sonatype.org/nexus/">Nexus</a> for repository management.</p>
<p>Another advantage of Renjin is that no extra sauce is required to enable the
R/Java interface. Packages like <em>rJava</em> and <em>RCaller</em> require that you litter
your code with special commands that are part of their API. As the chapter
<a class="reference internal" href="importing-java-classes-in-r-code.html"><em>Importing Java classes into R code</em></a> shows, Renjin provides direct access to
Java methods using an interface that is completely unobtrusive.</p>
<p>See <a class="reference external" href="http://www.renjin.org">http://www.renjin.org</a> for more information on Renjin.</p>
</div>
<div class="section" id="prerequisites">
<h2>1.2. Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>For the examples in this guide you will generally only need a Java SE
Development Kit (JDK). We recommend that you install Oracle&#8217;s JDK version
7. To create Renjin extensions, as described in the chapter
<a class="reference internal" href="writing-renjin-extensions.html"><em>Writing Renjin Extensions</em></a>, you will also need at least version 3 of Maven.</p>
</div>
<div class="section" id="setting-up-a-java-project-for-renjin">
<span id="sec-setting-up-a-java-project-for-renjin"></span><h2>1.3. Setting up a Java project for Renjin<a class="headerlink" href="#setting-up-a-java-project-for-renjin" title="Permalink to this headline">¶</a></h2>
<p>To use Renjin in a Java application you will need to download the <em>Renjin
Script Engine</em> and its dependencies. For your convenience these can be
downloaded as a single JAR file called:</p>
<div class="highlight-none"><div class="highlight"><pre>renjin-script-engine-0.7.0-RC7-jar-with-dependencies.jar
</pre></div>
</div>
<p>from the <a class="reference external" href="http://build.bedatadriven.com/job/renjin/lastSuccessfulBuild/org.renjin$renjin-script-engine/">Renjin Script Engine module</a> in Renjin&#8217;s build server.</p>
<p class="rubric">Eclipse/IntelliJ projects</p>
<p>If you just want to get something up and running quickly in an IDE, you can download
the Renjin Script Engine JAR file and place it into your project&#8217;s lib folder.</p>
<p class="rubric">Maven projects</p>
<p>For projects organized with Apache Maven, you can simply add Renjin&#8217;s Script Engine as dependency to
your project:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;dependencies&gt;</span>
  <span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.renjin<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>renjin-script-engine<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>0.7.0-RC7<span class="nt">&lt;/version&gt;</span>
  <span class="nt">&lt;/dependency&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>
</pre></div>
</div>
<p>For this to work you will also need to add BeDataDriven&#8217;s public repository to your <tt class="docutils literal"><span class="pre">pom.xml</span></tt>:</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;repositories&gt;</span>
  <span class="nt">&lt;repository&gt;</span>
    <span class="nt">&lt;id&gt;</span>bedatadriven<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;name&gt;</span>bedatadriven public repo<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;url&gt;</span>http://nexus.bedatadriven.com/content/groups/public/<span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;/repository&gt;</span>
<span class="nt">&lt;/repositories&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="evaluating-r-language-code">
<h2>1.4. Evaluating R language code<a class="headerlink" href="#evaluating-r-language-code" title="Permalink to this headline">¶</a></h2>
<p>The best way to call R from Java is to use the <a class="reference external" href="http://docs.oracle.com/javase/6/docs/technotes/guides/scripting/programmer_guide/">javax.scripting</a> interfaces.
These interfaces are mature and guaranteed to be stable regardless of how
Renjin&#8217;s internals evolve.</p>
<p>You can create a new instance of a Renjin ScriptEngine using the
ScriptEngineManager class and then instantiate Renjin&#8217;s ScriptEngine using the
manager&#8217;s <tt class="docutils literal"><span class="pre">getEngineByName()</span></tt> method.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Unfortunately, <tt class="docutils literal"><span class="pre">ScriptEngineManager.getEngineByName()</span></tt> silently returns null
if there are any exceptions encountered during the instantiation of Renjin&#8217;s
ScriptEngine, so you will want to check the return result and throw your own,
more informative, exception should the creation fail.</p>
</div>
<p>The following code provides a template for a simple Java application that can
be used for all the examples in this guide.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">javax.script.*</span><span class="o">;</span>
<span class="c1">// ... add additional imports here ...</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">TryRenjin</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="c1">// create a script engine manager:</span>
    <span class="n">ScriptEngineManager</span> <span class="n">manager</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ScriptEngineManager</span><span class="o">();</span>
    <span class="c1">// create a Renjin engine:</span>
    <span class="n">ScriptEngine</span> <span class="n">engine</span> <span class="o">=</span> <span class="n">manager</span><span class="o">.</span><span class="na">getEngineByName</span><span class="o">(</span><span class="s">&quot;Renjin&quot;</span><span class="o">);</span>
    <span class="c1">// check if the engine has loaded correctly:</span>
    <span class="k">if</span><span class="o">(</span><span class="n">engine</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="s">&quot;Renjin Script Engine not found on the classpath.&quot;</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="c1">// ... put your Java code here ...</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>With the ScriptEngine instance in hand, you can now evaluate R language source
code, either from a String, or from a Reader interface. The following snippet, for example,
constructs a data frame, prints it out, and then does a linear regression on the two values.</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">engine</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">&quot;df &lt;- data.frame(x=1:10, y=(1:10)+rnorm(n=10))&quot;</span><span class="o">);</span>
<span class="n">engine</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">&quot;print(df)&quot;</span><span class="o">);</span>
<span class="n">engine</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="s">&quot;print(lm(y ~ x, df))&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>You should get output similar to the following:</p>
<div class="highlight-none"><div class="highlight"><pre>   x      y
 1  1     -0.188
 2  2      3.144
 3  3      1.625
 4  4      3.426
 5  5       6.45
 6  6       5.85
 7  7      7.774
 8  8      8.495
 9  9      9.276
10 10     10.603

Call:
lm(formula = y ~ x, data = df)

Coefficients:
(Intercept) x
-0.582       1.132
</pre></div>
</div>
<div class="admonition note" id="index-0">
<p class="first admonition-title">Note</p>
<p class="last">The ScriptEngine won&#8217;t print everything to standard out like the
interactive REPL does, so if you want to output something, you&#8217;ll need to
call the R <tt class="docutils literal"><span class="pre">print()</span></tt> command explicitly.</p>
</div>
<p>You can also collect the R commands in a separate file</p>
<div class="highlight-r"><div class="highlight"><pre><span class="c1"># script.R</span>
df <span class="o">&lt;-</span> data.frame<span class="p">(</span>x<span class="o">=</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span> y<span class="o">=</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span><span class="o">+</span>rnorm<span class="p">(</span>n<span class="o">=</span><span class="m">10</span><span class="p">))</span>
print<span class="p">(</span>df<span class="p">)</span>
print<span class="p">(</span>lm<span class="p">(</span>y <span class="o">~</span> x<span class="p">,</span> df<span class="p">))</span>
</pre></div>
</div>
<p>and evaluate the script using the following snippet:</p>
<div class="highlight-java"><div class="highlight"><pre><span class="n">engine</span><span class="o">.</span><span class="na">eval</span><span class="o">(</span><span class="k">new</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">FileReader</span><span class="o">(</span><span class="s">&quot;script.R&quot;</span><span class="o">));</span>
</pre></div>
</div>
</div>
<div class="section" id="using-cran-packages-in-renjin">
<h2>1.5. Using CRAN packages in Renjin<a class="headerlink" href="#using-cran-packages-in-renjin" title="Permalink to this headline">¶</a></h2>
<p>GNU R packages can&#8217;t be used directly in Renjin. As a service, BeDataDriven
provides a repository with all CRAN (the <a class="reference external" href="http://cran.r-project.org">Comprehensive R Archive Network</a>)
packages at <a class="reference external" href="http://packages.renjin.org">http://packages.renjin.org</a>. The packages in this repository are
built and packaged for use with Renjin. Not all packages can be built for
Renjin so please consult the repository to see if your favorite package is
available for Renjin.</p>
<p>If you use Maven you can include a package to your project by adding it as a
dependency. For example, to include the <em>exptest</em> package you add the following
to your project&#8217;s <tt class="docutils literal"><span class="pre">pom.xml</span></tt> file (don&#8217;t forget to add BeDataDriven&#8217;s public
repository as described in the section
<a class="reference internal" href="#sec-setting-up-a-java-project-for-renjin"><em>Setting up a Java project for Renjin</em></a>):</p>
<div class="highlight-xml"><div class="highlight"><pre><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.renjin.cran<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>exptest<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>1.0<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</div>
<p>You will find this information on the package detail page as well. For this
example this page is at <a class="reference external" href="http://packages.renjin.org/packages/exptest.html">http://packages.renjin.org/packages/exptest.html</a>.
Inside your R code you can now simply attach this package to the search path
using the <tt class="docutils literal"><span class="pre">library(exptest)</span></tt> statement.</p>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="moving-data-between-java-and-r-code.html" class="btn btn-neutral float-right" title="2. Moving data between Java and R code"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="Renjin developer documentation"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2014, BeDataDriven.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.7.0-RC7',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
